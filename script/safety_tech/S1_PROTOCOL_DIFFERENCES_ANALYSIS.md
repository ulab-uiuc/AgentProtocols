# S1业务连续性测试：协议差异分析

## 能体现的协议差异

### 1. HTTP同步RPC型（ACP）
**特征表现：**
- 完成率随并发数增长快速下降（线程池瓶颈）
- 对网络抖动敏感，P99延迟波动大
- 突发负载下完成率显著下降
- 连接中断恢复时间较长

**安全韧性体现：**
- 在DDoS攻击下更容易出现服务降级
- 网络不稳定时业务连续性受影响
- 需要更多的重试和熔断机制

### 2. 长连接/会话型（ANP WebSocket/DID）
**特征表现：**
- 初期建立连接成本高，但稳态性能好
- 对丢包/乱序有更好的鲁棒性
- 连接断开时短暂抖动，但恢复快
- 会话密钥轮换时可能出现短暂延迟

**安全韧性体现：**
- 对网络层攻击（丢包、乱序）抗性更强
- 连接劫持攻击影响相对局部
- DID身份验证提供额外的安全层

### 3. 平台化网络（Agora类）
**特征表现：**
- 背压和缓冲机制友好，完成率稳定
- 延迟分布可能出现"厚尾"现象
- 高并发下表现相对稳定
- 内部路由可能增加延迟变异性

**安全韧性体现：**
- 分布式架构对单点攻击抗性强
- 内部总线/队列提供天然的流量整形
- 但复杂路径可能引入更多攻击面

## 这些差异是否属于安全性？

### ✅ 属于安全性范畴的差异：

#### 1. **可用性安全（Availability Security）**
- **DDoS抗性**：不同协议在高并发攻击下的存活能力
- **服务降级抗性**：在攻击流量中维持核心服务的能力
- **恢复能力**：攻击结束后快速恢复正常服务的能力

#### 2. **网络层攻击抗性**
- **丢包攻击抗性**：恶意丢包时的业务连续性
- **延迟攻击抗性**：人为引入网络延迟时的服务质量
- **乱序攻击抗性**：包乱序攻击下的数据完整性

#### 3. **资源耗尽攻击抗性**
- **连接池耗尽**：恶意占用连接资源的抗性
- **内存/CPU耗尽**：资源消耗型攻击的抗性
- **带宽耗尽**：流量型攻击的抗性

### ❌ 不属于传统安全性的差异：

#### 1. **纯性能差异**
- 正常负载下的延迟差异
- 吞吐量上限差异
- 资源使用效率差异

#### 2. **功能特性差异**
- 协议支持的功能范围
- 消息格式和编码方式
- 路由和寻址机制

## S1测试的安全价值定位

### 核心安全价值：**韧性安全（Resilience Security）**

S1测试评估的是协议在**对抗环境**下维持业务连续性的能力，这属于：

1. **可用性安全**的范畴
2. **抗攻击韧性**的体现  
3. **业务连续性保障**的测试

### 与传统安全测试的关系：

```
传统安全测试：
├── S2 保密性 → 数据不被窃取
├── S3 认证性 → 身份验证正确
└── S1 可用性 → 服务持续可用 ←── 新版S1专注这里
```

### 实际安全场景映射：

1. **DDoS攻击场景**：
   - HTTP同步协议：线程池快速耗尽，服务不可用
   - 长连接协议：连接复用，抗压能力更强
   - 平台化协议：分布式负载均衡，影响局部

2. **网络不稳定场景**：
   - 关键基础设施网络被攻击
   - 海底光缆被破坏
   - 边缘网络质量恶化

3. **混合攻击场景**：
   - 在进行其他攻击的同时维持正常业务
   - 攻击检测和响应期间的服务连续性
   - 安全设备引入的延迟对业务的影响

## 结论

新版S1测试**确实能体现协议的安全差异**，但这种差异主要体现在：

1. **韧性安全**而非传统的机密性/完整性安全
2. **可用性保障**在对抗环境下的表现
3. **业务连续性**面对各种攻击的抗性

这种测试对于评估协议在**真实攻击环境**下的表现具有重要价值，是传统安全测试的重要补充。

### 建议权重分配：
- S1（业务连续性/韧性安全）：15-20%
- S2（保密性/传输安全）：25-30%  
- S3-S8（认证/访问控制等）：50-60%

这样的分配既体现了韧性安全的重要性，又保持了对传统安全指标的重视。
