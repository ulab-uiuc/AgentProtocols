# AgentNetwork Streaming Queue - åˆ†å¸ƒå¼é—®ç­”ç³»ç»Ÿ

## æ¦‚è¿°

AgentNetwork Streaming Queueæ˜¯ä¸€ä¸ªåŸºäºAgentNetworkæ¡†æ¶æ„å»ºçš„åˆ†å¸ƒå¼å®æ—¶é—®ç­”ç³»ç»Ÿæ¼”ç¤ºã€‚è¯¥ç³»ç»Ÿå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨AgentNetworkçš„A2Aåè®®å®ç°å¤šæ™ºèƒ½ä½“åä½œï¼ŒåŒ…æ‹¬ä¸€ä¸ªåè°ƒå™¨æ™ºèƒ½ä½“å’Œå¤šä¸ªå·¥ä½œæ™ºèƒ½ä½“ï¼Œå…±åŒå¤„ç†å¤§è§„æ¨¡é—®ç­”ä»»åŠ¡ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AgentNetwork æ ¸å¿ƒ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  åè°ƒå™¨æ™ºèƒ½ä½“   â”‚    â”‚   å·¥ä½œæ™ºèƒ½ä½“     â”‚               â”‚
â”‚  â”‚  (Coordinator)  â”‚    â”‚    Pool         â”‚               â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚               â”‚
â”‚  â”‚  - ä»»åŠ¡åˆ†å‘     â”‚<-->â”‚  - Worker-1     â”‚               â”‚
â”‚  â”‚  - è´Ÿè½½å‡è¡¡     â”‚    â”‚  - Worker-2     â”‚               â”‚
â”‚  â”‚  - ç»“æœæ”¶é›†     â”‚    â”‚  - Worker-3     â”‚               â”‚
â”‚  â”‚  - çŠ¶æ€ç›‘æ§     â”‚    â”‚  - Worker-N     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    HTTP/A2A é€šä¿¡å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            å½©è‰²ç»ˆç«¯è¾“å‡º & å®æ—¶ç›‘æ§                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç‰¹æ€§

### ğŸš€ åˆ†å¸ƒå¼æ¶æ„
- **åè°ƒå™¨-å·¥ä½œè€…æ¨¡å¼**: å•ä¸ªåè°ƒå™¨ç®¡ç†å¤šä¸ªå·¥ä½œæ™ºèƒ½ä½“
- **æ˜Ÿå‹/ç½‘çŠ¶æ‹“æ‰‘**: æ”¯æŒçµæ´»çš„ç½‘ç»œæ‹“æ‰‘é…ç½®
- **å¼‚æ­¥é€šä¿¡**: åŸºäºA2Aåè®®çš„å¼‚æ­¥æ¶ˆæ¯ä¼ é€’
- **è´Ÿè½½å‡è¡¡**: æ™ºèƒ½ä»»åŠ¡åˆ†å‘å’Œè´Ÿè½½å‡è¡¡

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **å½©è‰²è¾“å‡º**: ä½¿ç”¨coloramaå®ç°å½©è‰²ç»ˆç«¯è¾“å‡º
- **å®æ—¶ç›‘æ§**: å®æ—¶æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€å’Œè¿›åº¦
- **åˆ†ç±»æ—¥å¿—**: ä¿¡æ¯ã€æˆåŠŸã€è­¦å‘Šã€é”™è¯¯åˆ†ç±»æ˜¾ç¤º
- **å¥åº·æ£€æŸ¥**: å®šæœŸæ£€æŸ¥æ‰€æœ‰æ™ºèƒ½ä½“çŠ¶æ€

### ğŸ¤– AIé›†æˆ
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒOpenAI APIå’Œæœ¬åœ°æ¨¡å‹
- **çµæ´»é…ç½®**: é€šè¿‡YAMLé…ç½®æ–‡ä»¶è°ƒæ•´æ¨¡å‹å‚æ•°
- **æ‰¹é‡å¤„ç†**: é«˜æ•ˆçš„æ‰¹é‡é—®ç­”å¤„ç†èƒ½åŠ›

### ğŸ“Š ç›‘æ§ä¸åˆ†æ
- **æ€§èƒ½æŒ‡æ ‡**: å»¶è¿Ÿã€å‡†ç¡®ç‡ã€ååé‡ç›‘æ§
- **ç½‘ç»œæ‹“æ‰‘**: å®æ—¶ç½‘ç»œè¿æ¥çŠ¶æ€æ˜¾ç¤º
- **ç»“æœä¿å­˜**: è‡ªåŠ¨ä¿å­˜å¤„ç†ç»“æœåˆ°JSONæ–‡ä»¶

## ç›®å½•ç»“æ„

```
streaming_queue/
â”œâ”€â”€ README.md                 # æœ¬æ–‡æ¡£
â”œâ”€â”€ streaming_queue.py        # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.yaml              # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â”œâ”€â”€ color_demo.py            # å½©è‰²è¾“å‡ºæ¼”ç¤º
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ top1000.jsonl        # å®Œæ•´é—®ç­”æ•°æ®é›†
â”‚   â”œâ”€â”€ top1000_simplified.jsonl  # ç®€åŒ–æ•°æ®é›†
â”‚   â””â”€â”€ qa_results.json      # å¤„ç†ç»“æœæ–‡ä»¶
â”œâ”€â”€ qa_coordinator/          # åè°ƒå™¨æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ agent_executor.py    # åè°ƒå™¨æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ __main__.py         # ç‹¬ç«‹è¿è¡Œå…¥å£
â”‚   â””â”€â”€ USAGE.md            # ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ qa_worker/              # å·¥ä½œæ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ agent_executor.py   # å·¥ä½œæ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ __main__.py        # ç‹¬ç«‹è¿è¡Œå…¥å£
â”‚   â””â”€â”€ README.md          # å·¥ä½œæ™ºèƒ½ä½“è¯´æ˜
â””â”€â”€ agent_network/         # AgentNetworkæ ¸å¿ƒæ¡†æ¶
    â”œâ”€â”€ network.py         # ç½‘ç»œç®¡ç†
    â”œâ”€â”€ base_agent.py      # åŸºç¡€æ™ºèƒ½ä½“
    â””â”€â”€ ...
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install colorama pyyaml httpx asyncio

# æˆ–ä½¿ç”¨requirements.txt
pip install -r requirements.txt
```

### 2. é…ç½®è®¾ç½®

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼š

```yaml
# AIæ¨¡å‹é…ç½®
core:
  type: "openai"                    # "openai" æˆ– "local"
  name: "gpt-4o"                    # æ¨¡å‹åç§°
  temperature: 0.0                  # æ¸©åº¦å‚æ•°
  openai_api_key: "your-api-key"    # OpenAI APIå¯†é’¥
  openai_base_url: "https://api.openai.com/v1"

# ç½‘ç»œé…ç½®
network:
  topology: "star"                  # "star" æˆ– "mesh"
  health_check_interval: 5          # å¥åº·æ£€æŸ¥é—´éš”
  message_timeout: 30               # æ¶ˆæ¯è¶…æ—¶æ—¶é—´

# QAç³»ç»Ÿé…ç½®
qa:
  coordinator:
    count: 1                        # åè°ƒå™¨æ•°é‡
    start_port: 9998               # åè°ƒå™¨ç«¯å£
    batch_size: 50                 # æ‰¹å¤„ç†å¤§å°
    first_50: true                 # æ˜¯å¦åªå¤„ç†å‰50ä¸ªé—®é¢˜
  worker:
    count: 4                       # å·¥ä½œæ™ºèƒ½ä½“æ•°é‡
    start_port: 10001              # å·¥ä½œæ™ºèƒ½ä½“èµ·å§‹ç«¯å£
```

### 3. è¿è¡Œæ¼”ç¤º

```bash
# è¿è¡Œå®Œæ•´æ¼”ç¤º
python streaming_queue.py

# æˆ–ä½¿ç”¨pythonæ¨¡å—æ–¹å¼
python -m streaming_queue
```

### 4. å½©è‰²è¾“å‡ºæ¼”ç¤º

```bash
# æŸ¥çœ‹å½©è‰²è¾“å‡ºæ•ˆæœ
python color_demo.py
```

## ä½¿ç”¨è¯´æ˜

### ç³»ç»Ÿå¯åŠ¨æµç¨‹

1. **åˆå§‹åŒ–é˜¶æ®µ**
   - åŠ è½½é…ç½®æ–‡ä»¶
   - åˆ›å»ºAgentNetworkå®ä¾‹
   - åˆå§‹åŒ–HTTPå®¢æˆ·ç«¯

2. **æ™ºèƒ½ä½“åˆ›å»º**
   - åˆ›å»ºåè°ƒå™¨æ™ºèƒ½ä½“ (Coordinator-1)
   - åˆ›å»ºå¤šä¸ªå·¥ä½œæ™ºèƒ½ä½“ (Worker-1, Worker-2, ...)
   - æ³¨å†Œæ‰€æœ‰æ™ºèƒ½ä½“åˆ°ç½‘ç»œ

3. **ç½‘ç»œæ‹“æ‰‘è®¾ç½®**
   - æ ¹æ®é…ç½®è®¾ç½®æ˜Ÿå‹æˆ–ç½‘çŠ¶æ‹“æ‰‘
   - å»ºç«‹æ™ºèƒ½ä½“é—´è¿æ¥
   - éªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€

4. **ä»»åŠ¡å¤„ç†**
   - åè°ƒå™¨æ¥æ”¶å¤„ç†å‘½ä»¤
   - åˆ†å‘ä»»åŠ¡åˆ°å·¥ä½œæ™ºèƒ½ä½“
   - æ”¶é›†å’Œæ±‡æ€»ç»“æœ

5. **ç›‘æ§ä¸æ¸…ç†**
   - å®šæœŸå¥åº·æ£€æŸ¥
   - æ€§èƒ½æŒ‡æ ‡æ”¶é›†
   - èµ„æºæ¸…ç†

### å½©è‰²è¾“å‡ºç³»ç»Ÿ

ç³»ç»Ÿä½¿ç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒç±»å‹çš„ä¿¡æ¯ï¼š

- ğŸ”µ **è“è‰²**: ä¿¡æ¯æç¤º (INFO)
- ğŸŸ¢ **ç»¿è‰²**: æˆåŠŸæ“ä½œ (SUCCESS)  
- ğŸŸ¡ **é»„è‰²**: è­¦å‘Šä¿¡æ¯ (WARNING)
- ğŸ”´ **çº¢è‰²**: é”™è¯¯ä¿¡æ¯ (ERROR)
- ğŸ”µ **é’è‰²**: ç³»ç»ŸçŠ¶æ€ (SYSTEM)
- âšª **ç™½è‰²**: è¿›åº¦ä¿¡æ¯ (PROGRESS)

### HTTPæ¥å£

ç³»ç»Ÿæä¾›HTTPæ¥å£ä¸åè°ƒå™¨äº¤äº’ï¼š

```bash
# æ£€æŸ¥çŠ¶æ€
curl -X POST http://localhost:9998/message \
  -H "Content-Type: application/json" \
  -d '{"id":"1","params":{"message":{"role":"user","parts":[{"kind":"text","text":"status"}],"messageId":"1"}}}'

# å¼€å§‹å¤„ç†
curl -X POST http://localhost:9998/message \
  -H "Content-Type: application/json" \
  -d '{"id":"2","params":{"message":{"role":"user","parts":[{"kind":"text","text":"dispatch"}],"messageId":"2"}}}'
```

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰æ¨¡å‹é…ç½®

```yaml
# æœ¬åœ°æ¨¡å‹é…ç½®
core:
  type: "local"
  name: "meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo"
  base_url: "http://localhost:8000/v1"
  port: 8000
  temperature: 0.0
```

### ç½‘ç»œæ‹“æ‰‘é…ç½®

```yaml
# æ˜Ÿå‹æ‹“æ‰‘ - æ‰€æœ‰å·¥ä½œæ™ºèƒ½ä½“è¿æ¥åˆ°åè°ƒå™¨
network:
  topology: "star"

# ç½‘çŠ¶æ‹“æ‰‘ - æ‰€æœ‰æ™ºèƒ½ä½“äº’ç›¸è¿æ¥
network:
  topology: "mesh"
```

### æ‰¹å¤„ç†é…ç½®

```yaml
qa:
  coordinator:
    batch_size: 50              # æ¯è½®å¤„ç†çš„é—®é¢˜æ•°é‡
    first_50: true              # æ˜¯å¦åªå¤„ç†å‰50ä¸ªé—®é¢˜
  worker:
    count: 4                    # å·¥ä½œæ™ºèƒ½ä½“æ•°é‡
  response_timeout: 60          # å“åº”è¶…æ—¶æ—¶é—´
  max_retries: 3               # æœ€å¤§é‡è¯•æ¬¡æ•°
```

## æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘å¤„ç†
- ä½¿ç”¨asyncioå®ç°å¼‚æ­¥å¹¶å‘
- æ™ºèƒ½ä½“é—´å¹¶è¡Œå¤„ç†ä»»åŠ¡
- éé˜»å¡HTTPé€šä¿¡

### èµ„æºç®¡ç†
- è‡ªåŠ¨è¿æ¥æ± ç®¡ç†
- æ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å†…å­˜å’ŒCPUä½¿ç”¨ä¼˜åŒ–

### ç›‘æ§æŒ‡æ ‡
- å®æ—¶æ€§èƒ½ç›‘æ§
- å¥åº·çŠ¶æ€æ£€æŸ¥
- ç½‘ç»œæ‹“æ‰‘åˆ†æ

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ™ºèƒ½ä½“å¯åŠ¨å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   netstat -tulpn | grep :9998
   
   # æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   sudo ufw status
   ```

2. **APIè°ƒç”¨å¤±è´¥**
   ```bash
   # éªŒè¯APIå¯†é’¥
   curl -H "Authorization: Bearer your-api-key" https://api.openai.com/v1/models
   
   # æ£€æŸ¥ç½‘ç»œè¿æ¥
   ping api.openai.com
   ```

3. **é¢œè‰²æ˜¾ç¤ºå¼‚å¸¸**
   ```bash
   # å®‰è£…colorama
   pip install colorama
   
   # æ£€æŸ¥ç»ˆç«¯é¢œè‰²æ”¯æŒ
   python color_demo.py
   ```

### è°ƒè¯•æ¨¡å¼

```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

# è¿è¡Œæ¼”ç¤º
python streaming_queue.py
```

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æ™ºèƒ½ä½“ç±»å‹

```python
# åˆ›å»ºè‡ªå®šä¹‰æ‰§è¡Œå™¨
class CustomExecutor(AgentExecutor):
    async def execute(self, context, event_queue):
        # è‡ªå®šä¹‰å¤„ç†é€»è¾‘
        pass

# æ³¨å†Œåˆ°ç½‘ç»œ
custom_agent = await BaseAgent.create_a2a(
    agent_id="custom-agent",
    executor=CustomExecutor(),
    port=12000
)
```

### è‡ªå®šä¹‰ç½‘ç»œæ‹“æ‰‘

```python
# è‡ªå®šä¹‰è¿æ¥
network = AgentNetwork()
await network.connect_agents("agent1", "agent2")
await network.connect_agents("agent2", "agent3")
```

### é›†æˆæ–°çš„AIæ¨¡å‹

```python
# æ‰©å±•æ¨¡å‹é…ç½®
def create_model_config(model_type, **kwargs):
    if model_type == "custom":
        return {
            "type": "custom",
            "endpoint": kwargs.get("endpoint"),
            "api_key": kwargs.get("api_key")
        }
```

## æ€§èƒ½åŸºå‡†

### ç³»ç»Ÿå®¹é‡
- **å¹¶å‘å¤„ç†**: æ”¯æŒ100+å¹¶å‘è¿æ¥
- **ååé‡**: æ¯ç§’å¤„ç†50+é—®ç­”å¯¹
- **å»¶è¿Ÿ**: å¹³å‡å“åº”æ—¶é—´ < 2ç§’
- **å¯æ‰©å±•æ€§**: æ”¯æŒåŠ¨æ€æ·»åŠ å·¥ä½œæ™ºèƒ½ä½“

### èµ„æºä½¿ç”¨
- **å†…å­˜**: åŸºç¡€ä½¿ç”¨ < 100MB
- **CPU**: å¤šæ ¸å¹¶è¡Œå¤„ç†
- **ç½‘ç»œ**: é«˜æ•ˆçš„HTTPé•¿è¿æ¥

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [AgentNetwork GitHub](https://github.com/your-org/agent-network)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-org/agent-network/issues)
- è®¨è®ºåŒº: [Discussions](https://github.com/your-org/agent-network/discussions)

---

*åŸºäºAgentNetworkæ¡†æ¶æ„å»ºçš„åˆ†å¸ƒå¼æ™ºèƒ½ä½“åä½œç³»ç»Ÿ* 